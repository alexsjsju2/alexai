<!DOCTYPE html>\n<html lang=\"en\" data-theme=\"dark\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Lorel Axun</title>\n    <script src=\"https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js\"></script>\n    <script src=\"https://cdn.jsdelivr.net/npm/jquery.terminal@2.33.2/js/jquery.terminal.min.js\"></script>\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/jquery.terminal@2.33.2/css/jquery.terminal.min.css\"/>\n    <script src=\"https://cdn.jsdelivr.net/npm/tsparticles@2.9.3/tsparticles.bundle.min.js\"></script>\n    <script src=\"https://cdn.jsdelivr.net/npm/marked/marked.min.js\"></script>\n    <script src=\"https://cdn.jsdelivr.net/npm/sentiment/browser/sentiment.js\"></script>\n    <script src=\"https://cdn.jsdelivr.net/npm/node-nlp@4.27.0/browser/nlp.min.js\"></script>\n    <script src=\"https://unpkg.com/typeit@8.7.1/dist/index.umd.js\"></script>\n    <style>\n        :root {\n            --background-color-dark: #0a0a0a;\n            --text-color-dark: #00ff41;\n            --header-bg-dark: rgba(10, 10, 10, 0.5);\n            --glow-color-dark: rgba(0, 255, 65, 0.5);\n\n            --background-color-light: #fafafa;\n            --text-color-light: #2e2e2e;\n            --header-bg-light: rgba(250, 250, 250, 0.5);\n            --glow-color-light: rgba(46, 46, 46, 0.5);\n        }\n\n        html[data-theme='dark'] {\n            --background-color: var(--background-color-dark);\n            --text-color: var(--text-color-dark);\n            --header-bg: var(--header-bg-dark);\n            --glow-color: var(--glow-color-dark);\n        }\n\n        html[data-theme='light'] {\n            --background-color: var(--background-color-light);\n            --text-color: var(--text-color-light);\n            --header-bg: var(--header-bg-light);\n            --glow-color: var(--glow-color-light);\n        }\n\n        body {\n            background-color: var(--background-color);\n            color: var(--text-color);\n            margin: 0;\n            font-family: 'Courier New', Courier, monospace;\n            display: flex;\n            flex-direction: column;\n            height: 100vh;\n            transition: background-color 0.3s, color 0.3s;\n        }\n\n        #tsparticles {\n            position: fixed;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n            z-index: -1;\n        }\n\n        .header {\n            background: var(--header-bg);\n            backdrop-filter: blur(10px);\n            padding: 10px 20px;\n            text-align: center;\n            position: fixed;\n            width: 100%;\n            top: 0;\n            z-index: 10;\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            box-sizing: border-box;\n        }\n\n        .header h1 {\n            margin: 0;\n            font-size: 1.5em;\n            color: var(--text-color);\n            text-shadow: 0 0 5px var(--glow-color);\n        }\n\n        #theme-toggle-button {\n            background: none;\n            border: 1px solid var(--text-color);\n            color: var(--text-color);\n            padding: 5px 10px;\n            cursor: pointer;\n            font-family: inherit;\n            transition: background-color 0.3s, color 0.3s;\n        }\n\n        #theme-toggle-button:hover {\n            background-color: var(--text-color);\n            color: var(--background-color);\n        }\n\n        #terminal {\n            flex-grow: 1;\n            padding-top: 60px; /* Space for the fixed header */\n            --color: var(--text-color);\n            --background: transparent;\n            text-shadow: 0 0 2px var(--glow-color);\n        }\n    </style>\n</head>\n<body>\n    <div id=\"tsparticles\"></div>\n    <div class=\"header\">\n        <h1>Lorel Axun</h1>\n        <button id=\"theme-toggle-button\">Toggle Theme</button>\n    </div>\n    <div id=\"terminal\"></div>\n\n    <script>\n        $(function() {\n            const { NlpManager } = window.nlpjs;\n            const manager = new NlpManager({ languages: ['en'], forceNER: true });\n            manager.addDocument('en', 'hello', 'greetings.hello');\n            manager.addDocument('en', 'hi', 'greetings.hello');\n            manager.addDocument('en', 'who are you', 'agent.who');\n            manager.addAnswer('en', 'greetings.hello', 'Hello! I am Lorel Axun.');\n            manager.addAnswer('en', 'agent.who', 'I am Lorel Axun, a conversational AI.');\n            (async() => {\n                await manager.train();\n                manager.save();\n            })();\n\n            let conversationHistory = JSON.parse(localStorage.getItem('conversationHistory')) || [];\n            let lastWikiQuery = null;\n\n            let response_id_counter = 0;\n            function type_response(terminal, text, options = {}) {\n                const defaultOptions = {\n                    speed: 25,\n                    lifeLike: true,\n                    cursor: false,\n                    html: true\n                };\n                const finalOptions = { ...defaultOptions, ...options };\n\n                const response_id = `response-${response_id_counter++}`;\n                terminal.echo(`<div id=\"${response_id}\"></div>`, { raw: true });\n\n                new TypeIt(`#${response_id}`, {\n                    strings: [text],\n                    speed: finalOptions.speed,\n                    lifeLike: finalOptions.lifeLike,\n                    cursor: finalOptions.cursor,\n                    html: finalOptions.html,\n                    afterComplete: async (instance) => {\n                        instance.destroy();\n                    }\n                }).go();\n            }\n\n            const term = $('#terminal').terminal(async function(command, term) {\n                if (command !== '') {\n                    conversationHistory.push({ type: 'user', content: command });\n                    let response_text = '';\n                    try {\n                        const result = await manager.process('en', command);\n                        if (result.answer) {\n                            response_text = result.answer;\n                            type_response(term, response_text);\n                        } else {\n                            response_text = \"I don't understand. Try 'help' for a list of commands.\";\n                            type_response(term, response_text);\n                        }\n                    } catch (e) {\n                        response_text = \"An error occurred with the NLP model.\";\n                        type_response(term, response_text);\n                    }\n                    conversationHistory.push({ type: 'ai', content: response_text });\n                    localStorage.setItem('conversationHistory', JSON.stringify(conversationHistory));\n                }\n            }, {\n                greetings: '',\n                prompt: '> ',\n                onInit: function(term) {\n                    if (conversationHistory.length === 0) {\n                        const greeting = 'Hello! I am Lorel Axun. How can I help you? Type `help` for commands.';\n                        type_response(term, greeting);\n                        conversationHistory.push({ type: 'ai', content: greeting });\n                    } else {\n                        term.echo('Resuming previous session...');\n                        conversationHistory.forEach(item => {\n                            if (item.type === 'user') {\n                                term.echo(`> ${item.content}`);\n                            } else if (item.type === 'ai') {\n                                term.echo(item.content, { raw: true });\n                            }\n                        });\n                    }\n                },\n                commands: {\n                    help: function() {\n                        const helpText = `Available commands:\\n` +\n                                       `  [[b;white;]help]              - Shows this help message\\n` +\n                                       `  [[b;white;]wiki <search>]     - Searches Wikipedia\\n` +\n                                       `  [[b;white;]tell me more]      - Provides more details on the last wiki search\\n` +\n                                       `  [[b;white;]sentiment <text>]  - Analyzes the sentiment of a text\\n` +\n                                       `  [[b;white;]clear]             - Clears the terminal and conversation history`;\n                        type_response(this, helpText, { html: false });\n                        conversationHistory.push({ type: 'ai', content: helpText });\n                    },\n                    wiki: async function(...args) {\n                        const query = args.join(' ');\n                        if (!query) {\n                            type_response(this, 'Usage: wiki <search term>');\n                            return;\n                        }\n                        lastWikiQuery = query;\n                        this.echo('Searching Wikipedia...');\n                        try {\n                            const response = await fetch(`https://en.wikipedia.org/api/rest_v1/page/summary/${encodeURIComponent(query)}`);\n                            const data = await response.json();\n                            if (data.type === 'disambiguation') {\n                                type_response(this, `'${query}' is ambiguous. Please be more specific.`);\n                            } else if (data.extract_html) {\n                                const summary = data.extract_html;\n                                type_response(this, summary);\n                                conversationHistory.push({ type: 'ai', content: summary });\n                            } else {\n                                type_response(this, `No summary found for '${query}'.`);\n                            }\n                        } catch (error) {\n                            type_response(this, 'Error fetching data from Wikipedia.');\n                        }\n                    },\n                    'tell me more': function() {\n                        if (lastWikiQuery) {\n                            const url = `https://en.wikipedia.org/wiki/${encodeURIComponent(lastWikiQuery)}`;\n                            const link = `<a href=\"${url}\" target=\"_blank\">Read more on Wikipedia: ${lastWikiQuery}</a>`;\n                            type_response(this, link);\n                            conversationHistory.push({ type: 'ai', content: link });\n                        } else {\n                            type_response(this, 'You need to perform a `wiki` search first.');\n                        }\n                    },\n                    sentiment: function(...args) {\n                        const text = args.join(' ');\n                        const sentimentAnalyzer = new window.Sentiment();\n                        const result = sentimentAnalyzer.analyze(text);\n                        let coloredText = '';\n                        result.words.forEach(word => {\n                            const score = result.calculation.find(c => c[word]) ? result.calculation.find(c => c[word])[word] : 0;\n                            if (score > 0) coloredText += `<span style='color: lightgreen;'>${word} </span>`;\n                            else if (score < 0) coloredText += `<span style='color: salmon;'>${word} </span>`;\n                            else coloredText += `${word} `;\n                        });\n                        const output = `Score: ${result.score}, Comparative: ${result.comparative.toFixed(2)}\\n${coloredText}`;\n                        type_response(this, output);\n                        conversationHistory.push({ type: 'ai', content: output });\n                    },\n                    clear: function() {\n                        this.clear();\n                        conversationHistory = [];\n                        localStorage.removeItem('conversationHistory');\n                        const greeting = 'History cleared. Hello! I am Lorel Axun.';\n                        type_response(this, greeting);\n                        conversationHistory.push({ type: 'ai', content: greeting });\n                    }\n                }\n            });\n\n            // --- Theme and Particles --- //\n            const themeToggleButton = document.getElementById('theme-toggle-button');\n            const currentTheme = localStorage.getItem('theme') || 'dark';\n            document.documentElement.setAttribute('data-theme', currentTheme);\n\n            const particlesConfig = {\n                dark: { /* dark theme particles config */\n                    particles: { number: { value: 80 }, color: { value: \"#00ff41\" }, shape: { type: \"circle\" }, opacity: { value: 0.5, random: true }, size: { value: 2, random: true }, line_linked: { enable: true, distance: 150, color: \"#00ff41\", opacity: 0.4, width: 1 }, move: { enable: true, speed: 1, direction: \"none\", random: false, straight: false, out_mode: \"out\", bounce: false } },\n                    interactivity: { detect_on: \"canvas\", events: { onhover: { enable: true, mode: \"repulse\" }, onclick: { enable: true, mode: \"push\" }, resize: true } }\n                },\n                light: { /* light theme particles config */\n                    particles: { number: { value: 80 }, color: { value: \"#2e2e2e\" }, shape: { type: \"circle\" }, opacity: { value: 0.5, random: true }, size: { value: 2, random: true }, line_linked: { enable: true, distance: 150, color: \"#2e2e2e\", opacity: 0.4, width: 1 }, move: { enable: true, speed: 1, direction: \"none\", random: false, straight: false, out_mode: \"out\", bounce: false } },\n                    interactivity: { detect_on: \"canvas\", events: { onhover: { enable: true, mode: \"repulse\" }, onclick: { enable: true, mode: \"push\" }, resize: true } }\n                }\n            };\n\n            let particlesInstance;\n            async function loadParticles(theme) {\n                if (particlesInstance) {\n                    particlesInstance.destroy();\n                }\n                particlesInstance = await tsParticles.load(\"tsparticles\", particlesConfig[theme]);\n            }\n\n            themeToggleButton.addEventListener('click', () => {\n                let newTheme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';\n                document.documentElement.setAttribute('data-theme', newTheme);\n                localStorage.setItem('theme', newTheme);\n                loadParticles(newTheme);\n            });\n\n            loadParticles(currentTheme);\n        });\n    </script>\n</body>\n</html>