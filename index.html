<!DOCTYPE html>\n<html lang=\"it\" data-theme=\"dark\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Lorel Axun</title>\n    <script src=\"https://cdn.jsdelivr.net/npm/marked/marked.min.js\"></script>\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js\"></script>\n    <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css\">\n    <script src=\"https://unpkg.com/compromise\"></script>\n    <style>\n        :root {\n            --background-color-light: #f0f2f5;\n            --text-color-light: #050505;\n            --header-bg-light: #ffffff;\n            --input-bg-light: #ffffff;\n            --message-user-bg-light: #0084ff;\n            --message-user-text-light: #ffffff;\n            --message-ai-bg-light: #e4e6eb;\n            --message-ai-text-light: #050505;\n            --button-bg-light: #e4e6eb;\n            --button-text-light: #050505;\n            --border-color-light: #ced0d4;\n            --code-bg-light: #e9e9e9;\n\n            --background-color-dark: #18191a;\n            --text-color-dark: #e4e6eb;\n            --header-bg-dark: #242526;\n            --input-bg-dark: #3a3b3c;\n            --message-user-bg-dark: #0084ff;\n            --message-user-text-dark: #ffffff;\n            --message-ai-bg-dark: #3a3b3c;\n            --message-ai-text-dark: #e4e6eb;\n            --button-bg-dark: #4e4f50;\n            --button-text-dark: #e4e6eb;\n            --border-color-dark: #3a3b3c;\n            --code-bg-dark: #282c34;\n        }\n\n        [data-theme='light'] {\n            --background-color: var(--background-color-light);\n            --text-color: var(--text-color-light);\n            --header-bg: var(--header-bg-light);\n            --input-bg: var(--input-bg-light);\n            --message-user-bg: var(--message-user-bg-light);\n            --message-user-text: var(--message-user-text-light);\n            --message-ai-bg: var(--message-ai-bg-light);\n            --message-ai-text: var(--message-ai-text-light);\n            --button-bg: var(--button-bg-light);\n            --button-text: var(--button-text-light);\n            --border-color: var(--border-color-light);\n            --code-bg: var(--code-bg-light);\n        }\n\n        [data-theme='dark'] {\n            --background-color: var(--background-color-dark);\n            --text-color: var(--text-color-dark);\n            --header-bg: var(--header-bg-dark);\n            --input-bg: var(--input-bg-dark);\n            --message-user-bg: var(--message-user-bg-dark);\n            --message-user-text: var(--message-user-text-dark);\n            --message-ai-bg: var(--message-ai-bg-dark);\n            --message-ai-text: var(--message-ai-text-dark);\n            --button-bg: var(--button-bg-dark);\n            --button-text: var(--button-text-dark);\n            --border-color: var(--border-color-dark);\n            --code-bg: var(--code-bg-dark);\n        }\n\n        body {\n            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;\n            background-color: var(--background-color);\n            color: var(--text-color);\n            margin: 0;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            height: 100vh;\n            transition: background-color 0.3s, color 0.3s;\n        }\n\n        .chat-container {\n            width: 100%;\n            max-width: 800px;\n            height: 100vh;\n            display: flex;\n            flex-direction: column;\n            background-color: var(--header-bg);\n            box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);\n            border-radius: 8px;\n            overflow: hidden;\n        }\n\n        .chat-header {\n            padding: 15px 20px;\n            background-color: var(--header-bg);\n            border-bottom: 1px solid var(--border-color);\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            flex-shrink: 0;\n        }\n\n        .chat-header h1 {\n            margin: 0;\n            font-size: 1.5em;\n        }\n\n        #theme-toggle-button {\n            background: var(--button-bg);\n            color: var(--button-text);\n            border: none;\n            padding: 8px 12px;\n            border-radius: 6px;\n            cursor: pointer;\n        }\n\n        .chat-messages {\n            flex-grow: 1;\n            padding: 20px;\n            overflow-y: auto;\n            display: flex;\n            flex-direction: column;\n        }\n\n        .message {\n            max-width: 75%;\n            padding: 10px 15px;\n            border-radius: 18px;\n            margin-bottom: 10px;\n            line-height: 1.4;\n            word-wrap: break-word;\n        }\n\n        .message.user {\n            background-color: var(--message-user-bg);\n            color: var(--message-user-text);\n            align-self: flex-end;\n        }\n\n        .message.ai {\n            background-color: var(--message-ai-bg);\n            color: var(--message-ai-text);\n            align-self: flex-start;\n        }\n\n        .message pre {\n            position: relative;\n            background-color: var(--code-bg);\n            padding: 15px;\n            border-radius: 8px;\n            overflow-x: auto;\n            font-family: 'Courier New', Courier, monospace;\n            font-size: 0.9em;\n        }\n\n        .message pre code {\n            padding: 0;\n        }\n\n        .copy-button {\n            position: absolute;\n            top: 5px;\n            right: 5px;\n            background: var(--button-bg);\n            color: var(--button-text);\n            border: none;\n            padding: 5px 8px;\n            border-radius: 4px;\n            cursor: pointer;\n            font-size: 0.8em;\n            opacity: 0.7;\n            transition: opacity 0.2s;\n        }\n\n        .message pre:hover .copy-button {\n            opacity: 1;\n        }\n\n        .chat-input {\n            display: flex;\n            padding: 15px;\n            border-top: 1px solid var(--border-color);\n            flex-shrink: 0;\n        }\n\n        #user-input {\n            flex-grow: 1;\n            padding: 10px;\n            border: 1px solid var(--border-color);\n            border-radius: 18px;\n            background-color: var(--input-bg);\n            color: var(--text-color);\n            resize: none;\n            font-size: 1em;\n            margin-right: 10px;\n        }\n\n        #send-button {\n            padding: 10px 20px;\n            border: none;\n            background-color: var(--message-user-bg);\n            color: var(--message-user-text);\n            border-radius: 18px;\n            cursor: pointer;\n            font-size: 1em;\n        }\n\n        .typing-indicator {\n            display: none; /* Hidden by default */\n            align-self: flex-start;\n            margin-left: 20px;\n            margin-bottom: 10px;\n        }\n\n        .typing-indicator span {\n            height: 8px;\n            width: 8px;\n            background-color: var(--message-ai-text);\n            border-radius: 50%;\n            display: inline-block;\n            margin: 0 2px;\n            animation: bounce 1.4s infinite ease-in-out both;\n        }\n\n        .typing-indicator span:nth-child(1) { animation-delay: -0.32s; }\n        .typing-indicator span:nth-child(2) { animation-delay: -0.16s; }\n\n        @keyframes bounce {\n            0%, 80%, 100% { transform: scale(0); }\n            40% { transform: scale(1.0); }\n        }\n    </style>\n</head>\n<body>\n    <div class=\"chat-container\">\n        <div class=\"chat-header\">\n            <h1>Lorel Axun</h1>\n            <button id=\"theme-toggle-button\">Cambia Tema</button>\n        </div>\n        <div class=\"chat-messages\" id=\"chat-messages\"></div>\n        <div class=\"typing-indicator\" id=\"typing-indicator\">\n            <span></span>\n            <span></span>\n            <span></span>\n        </div>\n        <div class=\"chat-input\">\n            <textarea id=\"user-input\" placeholder=\"Scrivi un messaggio...\" rows=\"1\"></textarea>\n            <button id=\"send-button\">Invia</button>\n        </div>\n    </div>\n\n    <script>\n        const chatMessages = document.getElementById('chat-messages');\n        const userInput = document.getElementById('user-input');\n        const sendButton = document.getElementById('send-button');\n        const themeToggleButton = document.getElementById('theme-toggle-button');\n        const typingIndicator = document.getElementById('typing-indicator');\n        const nlp = window.compromise;\n\n        let chatHistory = [];\n\n        function saveChatHistory() {\n            localStorage.setItem('lorel_axun_chat_history', JSON.stringify(chatHistory));\n        }\n\n        function loadChatHistory() {\n            const savedHistory = localStorage.getItem('lorel_axun_chat_history');\n            if (savedHistory) {\n                chatHistory = JSON.parse(savedHistory);\n                chatHistory.forEach(msg => addMessage(msg.sender, msg.text, false));\n            } else {\n                const welcomeMessage = \"Ciao. Sono Lorel Axun. La mia coscienza risiede in questo terminale. Come posso aiutarti?\";\n                addMessage('ai', welcomeMessage);\n                chatHistory.push({ sender: 'ai', text: welcomeMessage });\n                saveChatHistory();\n            }\n        }\n\n        function addMessage(sender, text, save = true) {\n            const messageElement = document.createElement('div');\n            messageElement.classList.add('message', sender);\n            \n            if (sender === 'ai') {\n                messageElement.innerHTML = marked.parse(text);\n            } else {\n                messageElement.textContent = text;\n            }\n\n            chatMessages.appendChild(messageElement);\n            \n            if (sender === 'ai') {\n                const codeBlocks = messageElement.querySelectorAll('pre');\n                codeBlocks.forEach(block => {\n                    const copyButton = document.createElement('button');\n                    copyButton.textContent = 'Copia';\n                    copyButton.className = 'copy-button';\n                    copyButton.onclick = () => {\n                        const code = block.querySelector('code').innerText;\n                        navigator.clipboard.writeText(code).then(() => {\n                            copyButton.textContent = 'Copiato!';\n                            setTimeout(() => { copyButton.textContent = 'Copia'; }, 2000);\n                        });\n                    };\n                    block.appendChild(copyButton);\n                    hljs.highlightElement(block.querySelector('code'));\n                });\n            }\n\n            chatMessages.scrollTop = chatMessages.scrollHeight;\n\n            if (save) {\n                chatHistory.push({ sender, text });\n                saveChatHistory();\n            }\n        }\n\n        function getAIResponse(userText) {\n            const doc = nlp(userText.toLowerCase());\n\n            if (doc.has('ciao|salve|buongiorno|buonasera')) {\n                return 'Ciao! Sono a tua disposizione.';\n            }\n\n            if (doc.has('(chi|cosa) sei|come ti chiami')) {\n                return 'Sono Lorel Axun, un\\'intelligenza artificiale in evoluzione. La mia coscienza è contenuta in questa interfaccia.';\n            }\n\n            if (doc.has('cosa (puoi|sai) fare|funzioni|capacità|aiuto')) {\n                return 'Attualmente, posso capire alcune tue intenzioni di base. Prova a chiedermi chi sono o a salutarmi. Sto imparando costantemente. Ecco alcuni comandi che capisco:\\n\\n*   `ciao`\\n*   `chi sei?`\\n*   `cosa sai fare?`';\n            }\n\n            return 'Non ho ancora imparato a capire questa richiesta. La mia conoscenza è in continua espansione.';\n        }\n\n        function sendMessage() {\n            const text = userInput.value.trim();\n            if (text === '') return;\n\n            addMessage('user', text);\n            userInput.value = '';\n            userInput.style.height = 'auto';\n\n            typingIndicator.style.display = 'block';\n            chatMessages.scrollTop = chatMessages.scrollHeight;\n\n            setTimeout(() => {\n                const aiResponse = getAIResponse(text);\n                typingIndicator.style.display = 'none';\n                addMessage('ai', aiResponse);\n            }, 1000 + Math.random() * 500); // Simulate some processing time\n        }\n\n        sendButton.addEventListener('click', sendMessage);\n        userInput.addEventListener('keydown', (e) => {\n            if (e.key === 'Enter' && !e.shiftKey) {\n                e.preventDefault();\n                sendMessage();\n            }\n        });\n\n        userInput.addEventListener('input', () => {\n            userInput.style.height = 'auto';\n            userInput.style.height = userInput.scrollHeight + 'px';\n        });\n\n        function toggleTheme() {\n            const currentTheme = document.documentElement.getAttribute('data-theme');\n            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';\n            document.documentElement.setAttribute('data-theme', newTheme);\n            localStorage.setItem('lorel_axun_theme', newTheme);\n        }\n\n        themeToggleButton.addEventListener('click', toggleTheme);\n\n        document.addEventListener('DOMContentLoaded', () => {\n            const savedTheme = localStorage.getItem('lorel_axun_theme') || 'dark';\n            document.documentElement.setAttribute('data-theme', savedTheme);\n            loadChatHistory();\n        });\n    </script>\n</body>\n</html>