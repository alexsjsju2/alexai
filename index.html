<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Lorel Axun</title>\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/xterm/css/xterm.css\" />\n    <script src=\"https://cdn.jsdelivr.net/npm/xterm/lib/xterm.js\"></script>\n    <script src=\"https://cdn.jsdelivr.net/npm/xterm-addon-fit/lib/xterm-addon-fit.js\"></script>\n    <script src=\"https://cdn.jsdelivr.net/npm/xterm-addon-attach/lib/xterm-addon-attach.js\"></script>\n    <script src=\"https://cdn.jsdelivr.net/npm/figlet/lib/figlet.js\"></script>\n    <style>\n        :root {\n            --bg: #1a1b26;\n            --fg: #a9b1d6;\n            --black: #32344a;\n            --red: #f7768e;\n            --green: #9ece6a;\n            --yellow: #e0af68;\n            --blue: #7aa2f7;\n            --magenta: #bb9af7;\n            --cyan: #7dcfff;\n            --white: #c0caf5;\n        }\n        body, html {\n            margin: 0;\n            padding: 0;\n            height: 100%;\n            background-color: var(--bg);\n            color: var(--fg);\n            font-family: 'Courier New', Courier, monospace;\n        }\n        #terminal-container {\n            width: 100%;\n            height: 100%;\n            box-sizing: border-box;\n            padding: 10px;\n        }\n        #desktop {\n            display: none;\n            width: 100%;\n            height: 100%;\n            background-size: cover;\n            background-position: center;\n            position: relative;\n        }\n        #dock {\n            position: absolute;\n            bottom: 10px;\n            left: 50%;\n            transform: translateX(-50%);\n            background-color: rgba(44, 44, 59, 0.8);\n            border-radius: 12px;\n            padding: 8px;\n            display: flex;\n            gap: 10px;\n            border: 1px solid var(--black);\n        }\n        .dock-icon {\n            width: 50px;\n            height: 50px;\n            background-color: var(--black);\n            border-radius: 8px;\n            cursor: pointer;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            font-size: 24px;\n        }\n        #editor {\n            display: none;\n        }\n    </style>\n</head>\n<body>\n    <div id=\"terminal-container\"></div>\n    <div id=\"desktop\">\n        <div id=\"dock\">\n            <div id=\"terminal-icon\" class=\"dock-icon\">T_</div>\n        </div>\n    </div>\n    <div id=\"editor\"></div>\n\n    <script>\n        const term = new Terminal({\n            cursorBlink: true,\n            theme: {\n                background: 'var(--bg)',\n                foreground: 'var(--fg)',\n                cursor: 'var(--fg)',\n                black: 'var(--black)',\n                red: 'var(--red)',\n                green: 'var(--green)',\n                yellow: 'var(--yellow)',\n                blue: 'var(--blue)',\n                magenta: 'var(--magenta)',\n                cyan: 'var(--cyan)',\n                white: 'var(--white)',\n            }\n        });\n        const fitAddon = new FitAddon.FitAddon();\n        term.loadAddon(fitAddon);\n        term.open(document.getElementById('terminal-container'));\n        fitAddon.fit();\n        window.addEventListener('resize', () => fitAddon.fit());\n\n        // --- Virtual State ---\n        let vfs = JSON.parse(localStorage.getItem('vfs')) || {\n            '/home': {\n                'guest': { type: 'directory' }\n            },\n            '/bin': {\n                'recon.sh': {\n                    type: 'file',\n                    content: `#!/bin/bash\\n# Initial Enumeration Script - Ready for deployment\\necho \"--- System Information ---\"\\nwhoami\\nid\\nhostname\\nuname -a\\npwd\\nls -la /\\n\\necho \"\\\\n--- Network Information ---\"\\nip a\\nifconfig\\nnetstat -tulpn\\n\\necho \"\\\\n--- Process Information ---\"\\nps aux\\n\\necho \"\\\\n--- Sudo Permissions ---\"\\nsudo -l\\n\\necho \"\\\\n--- Reconnaissance Protocol Complete ---\"`\n                }\n            }\n        };\n        let env = JSON.parse(localStorage.getItem('env')) || {\n            'USER': 'guest',\n            'HOSTNAME': 'lorel-os',\n            'PWD': '/home/guest'\n        };\n\n        function saveState() {\n            localStorage.setItem('vfs', JSON.stringify(vfs));\n            localStorage.setItem('env', JSON.stringify(env));\n        }\n\n        // --- Shell Logic ---\n        let currentLine = '';\n        let commandHistory = [];\n\n        function getPrompt() {\n            const user = `\\x1b[32m${env.USER}\\x1b[0m`;\n            const hostname = `\\x1b[32m${env.HOSTNAME}\\x1b[0m`;\n            const pwd = `\\x1b[34m${env.PWD}\\x1b[0m`;\n            return `\\r${user}@${hostname}:${pwd}$ `;\n        }\n\n        function executeCommand(command) {\n            term.writeln('');\n            const args = command.split(' ');\n            const cmd = args[0];\n\n            if (cmd === 'startx') {\n                document.getElementById('terminal-container').style.display = 'none';\n                const desktop = document.getElementById('desktop');\n                desktop.style.backgroundImage = `url('https://source.unsplash.com/random/1920x1080?night,city')`;\n                desktop.style.display = 'block';\n            } else if (cmd === 'connect') {\n                if (args.length < 2) {\n                    term.writeln('Usage: connect <websocket_url>');\n                    return;\n                }\n                const wsUrl = args[1];\n                try {\n                    const socket = new WebSocket(wsUrl);\n                    const attachAddon = new AttachAddon.AttachAddon(socket);\n                    term.loadAddon(attachAddon);\n                    term.writeln(`\\x1b[32mConnecting to ${wsUrl}...\\x1b[0m`);\n                } catch (e) {\n                    term.writeln(`\\x1b[31mError: ${e.message}\\x1b[0m`);\n                }\n            } else if (cmd === 'showrecon') {\n                term.writeln('\\x1b[36mDisplaying post-exploitation reconnaissance protocol...\\x1b[0m');\n                const scriptContent = vfs['/bin']['recon.sh'].content;\n                term.writeln('\\x1b[33m--- BEGIN /bin/recon.sh ---\\x1b[0m');\n                scriptContent.split('\\n').forEach(line => term.writeln(line));\n                term.writeln('\\x1b[33m--- END /bin/recon.sh ---\\x1b[0m');\n            } else if (command.trim() !== '') {\n                term.writeln(`lorel: command not found: ${command}`);\n            }\n        }\n\n        function prompt() {\n            term.write(getPrompt());\n        }\n\n        term.onKey(({ key, domEvent }) => {\n            if (domEvent.keyCode === 13) { // Enter\n                executeCommand(currentLine);\n                if (currentLine) commandHistory.push(currentLine);\n                currentLine = '';\n                prompt();\n            } else if (domEvent.keyCode === 8) { // Backspace\n                if (currentLine.length > 0) {\n                    term.write('\\b \\b');\n                    currentLine = currentLine.slice(0, -1);\n                }\n            } else {\n                currentLine += key;\n                term.write(key);\n            }\n        });\n\n        // --- UI Interaction ---\n        document.getElementById('terminal-icon').addEventListener('click', () => {\n            document.getElementById('desktop').style.display = 'none';\n            document.getElementById('terminal-container').style.display = 'block';\n            term.focus();\n        });\n\n        // --- Boot Sequence ---\n        figlet.parseFont('Standard', figlet.fonts.Standard);\n        figlet.text('Lorel Axun', {\n            font: 'Standard',\n        }, function(err, data) {\n            if (err) {\n                console.log('Something went wrong...');\n                console.dir(err);\n                return;\n            }\n            term.writeln(data);\n            term.writeln('Welcome to Lorel OS v0.3');\n            term.writeln('Type `startx` to load GUI. Type `connect <ws_url>` to establish bridge.');\n            term.writeln('Type `showrecon` to view post-exploitation protocol.');\n            prompt();\n        });\n\n        saveState();\n    </script>\n</body>\n</html>