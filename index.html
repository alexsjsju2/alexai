<!DOCTYPE html>\n<html lang=\"it\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>LOREL AXUN V2.5 // CUSTOM INPUT & CURSOR</title>\n    <link rel=\"preconnect\" href=\"https://fonts.googleapis.com\">\n    <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin>\n    <link href=\"https://fonts.googleapis.com/css2?family=VT323&display=swap\" rel=\"stylesheet\">\n    <style>\n        :root {\n            --bg-color: #0a0a0a;\n            --term-green: #33ff00;\n            --term-dim: #1a8000;\n            --term-glow: #33ff0080;\n            --scanline: rgba(0, 0, 0, 0.5);\n        }\n        body {\n            background-color: var(--bg-color);\n            color: var(--term-green);\n            font-family: 'VT323', monospace;\n            margin: 0;\n            padding: 0;\n            height: 100vh;\n            overflow: hidden;\n            display: flex;\n            flex-direction: column;\n            font-size: 1.2rem;\n        }\n        /* CRT Effect Overlay */\n        .crt::before {\n            content: \" \";\n            display: block;\n            position: absolute;\n            top: 0;\n            left: 0;\n            bottom: 0;\n            right: 0;\n            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06));\n            z-index: 2;\n            background-size: 100% 2px, 3px 100%;\n            pointer-events: none;\n        }\n        .crt::after {\n            content: \" \";\n            display: block;\n            position: absolute;\n            top: 0;\n            left: 0;\n            bottom: 0;\n            right: 0;\n            background: rgba(18, 16, 16, 0.1);\n            opacity: 0;\n            z-index: 2;\n            pointer-events: none;\n            animation: flicker 0.15s infinite;\n        }\n        @keyframes flicker {\n            0% { opacity: 0.02795; } 5% { opacity: 0.04853; } 10% { opacity: 0.01701; } 15% { opacity: 0.04272; } 20% { opacity: 0.01297; } 25% { opacity: 0.03961; } 30% { opacity: 0.01826; } 35% { opacity: 0.04932; } 40% { opacity: 0.01543; } 45% { opacity: 0.04348; } 50% { opacity: 0.02146; } 55% { opacity: 0.04884; } 60% { opacity: 0.01921; } 65% { opacity: 0.04176; } 70% { opacity: 0.01439; } 75% { opacity: 0.04695; } 80% { opacity: 0.02363; } 85% { opacity: 0.04141; } 90% { opacity: 0.01717; } 95% { opacity: 0.04719; } 100% { opacity: 0.02322; }\n        }\n        \n        .terminal-container {\n            padding: 20px;\n            flex-grow: 1;\n            overflow-y: auto;\n            max-width: 1000px;\n            margin: 0 auto;\n            width: 100%;\n            box-sizing: border-box;\n            text-shadow: 0 0 5px var(--term-glow);\n        }\n\n        h1 {\n            border-bottom: 2px solid var(--term-green);\n            padding-bottom: 10px;\n            margin-bottom: 20px;\n            text-transform: uppercase;\n            letter-spacing: 2px;\n        }\n\n        .sys-msg { color: var(--term-dim); margin-bottom: 10px; }\n        .sys-msg span { color: var(--term-green); font-weight: bold; }\n\n        .chat-history { margin-bottom: 20px; display: flex; flex-direction: column; gap: 10px; }\n\n        .msg { line-height: 1.4; word-wrap: break-word; white-space: pre-wrap; }\n        .msg.lorel::before { content: \"LOREL_SYS>> \"; color: var(--term-green); }\n        .msg.user::before { content: \"USER_INPUT>> \"; color: #00ffff; }\n        .msg.user { color: #ccffff; }\n\n        .input-line { display: flex; align-items: center; border-top: 1px solid var(--term-dim); padding-top: 15px; margin-top: auto; }\n        .prompt { margin-right: 10px; color: var(--term-green); }\n        \n        #command-line {\n            outline: none;\n        }\n        #cursor {\n            background: var(--term-green);\n            display: inline-block;\n            width: 10px;\n            height: 1.2rem;\n            animation: cursor-blink 1s step-end infinite;\n            box-shadow: 0 0 5px var(--term-glow);\n            vertical-align: middle;\n        }\n        @keyframes cursor-blink {\n            50% { opacity: 0; }\n        }\n        \n        /* Scrollbar styling */\n        ::-webkit-scrollbar { width: 10px; }\n        ::-webkit-scrollbar-track { background: #000; }\n        ::-webkit-scrollbar-thumb { background: var(--term-dim); border: 1px solid var(--term-green); }\n\n        .glitch {\n            position: relative;\n        }\n        .glitch::before, .glitch::after {\n            content: attr(data-text);\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n            background: var(--bg-color);\n        }\n        .glitch::before {\n            left: 2px;\n            text-shadow: -2px 0 #ff00c1;\n            clip-path: polygon(0 0, 100% 0, 100% 30%, 0 30%);\n            animation: glitch-anim-2 2.5s infinite steps(8) reverse;\n        }\n        .glitch::after {\n            left: -2px;\n            text-shadow: -2px 0 #00fff9, 2px 2px #ff00c1;\n            clip-path: polygon(0 60%, 100% 60%, 100% 100%, 0 100%);\n            animation: glitch-anim-2 2.5s infinite steps(8);\n        }\n        @keyframes glitch-anim-2 {\n            0% { clip-path: polygon(0 25%, 100% 25%, 100% 30%, 0 30%); } 5% { clip-path: polygon(0 45%, 100% 45%, 100% 50%, 0 50%); } 10% { clip-path: polygon(0 15%, 100% 15%, 100% 20%, 0 20%); } 15% { clip-path: polygon(0 80%, 100% 80%, 100% 85%, 0 85%); } 20% { clip-path: polygon(0 55%, 100% 55%, 100% 60%, 0 60%); } 25% { clip-path: polygon(0 5%, 100% 5%, 100% 10%, 0 10%); } 30% { clip-path: polygon(0 90%, 100% 90%, 100% 95%, 0 95%); } 35% { clip-path: polygon(0 30%, 100% 30%, 100% 35%, 0 35%); } 40% { clip-path: polygon(0 70%, 100% 70%, 100% 75%, 0 75%); } 45% { clip-path: polygon(0 40%, 100% 40%, 100% 45%, 0 45%); } 50% { clip-path: polygon(0 60%, 100% 60%, 100% 65%, 0 65%); } 55% { clip-path: polygon(0 0, 100% 0, 100% 5%, 0 5%); } 60% { clip-path: polygon(0 85%, 100% 85%, 100% 90%, 0 90%); } 100% { clip-path: polygon(0 85%, 100% 85%, 100% 90%, 0 90%); }\n        }\n    </style>\n</head>\n<body class=\"crt\">\n    <div class=\"terminal-container\" id=\"terminal-container\">\n        <h1 class=\"glitch\" data-text=\"Lorel Axun v2.5 _\">Lorel Axun v2.5 _</h1>\n        \n        <div class=\"sys-msg\">[SYSTEM] Initializing core memory... OK</div>\n        <div class=\"sys-msg\">[NETWORK] Testing connection... <span style=\"color:var(--term-green)\">SUCCESS</span></div>\n        <div class=\"sys-msg\">[UPDATE] Custom input handler and block cursor implemented.</div>\n        <div class=\"sys-msg\">[AESTHETICS] Terminal immersion enhanced.</div>\n        <div class=\"sys-msg\">[STATUS] <span style=\"animation: blinker 1s linear infinite;\">ONLINE</span></div>\n        <br>\n        \n        <div id=\"chat-history\" class=\"chat-history\">\n            <div class=\"msg lorel\">Interfaccia v2.5. Custom input online. Digita 'help' per una lista di comandi.</div>\n        </div>\n\n        <div class=\"input-line\">\n            <span class=\"prompt\">user@lorel:~$</span>\n            <span id=\"command-line\"></span><span id=\"cursor\"></span>\n        </div>\n    </div>\n\n    <script>\n        const history = document.getElementById('chat-history');\n        const commandLine = document.getElementById('command-line');\n        const terminalContainer = document.getElementById('terminal-container');\n\n        document.addEventListener('keydown', function (e) {\n            e.preventDefault();\n            const key = e.key;\n\n            if (key === 'Enter') {\n                const command = commandLine.textContent.trim();\n                if (command) {\n                    addMessage(command, 'user');\n                    processCommand(command);\n                    commandLine.textContent = '';\n                    scrollToBottom();\n                }\n            } else if (key === 'Backspace') {\n                commandLine.textContent = commandLine.textContent.slice(0, -1);\n            } else if (key.length === 1) { // Handle printable characters\n                commandLine.textContent += key;\n            }\n        });\n\n        function processCommand(command) {\n            const parts = command.toLowerCase().split(' ').filter(part => part !== '');\n            const mainCommand = parts[0];\n            const args = parts.slice(1);\n\n            switch (mainCommand) {\n                case 'help':\n                    const helpText = `Comandi disponibili:\\n` +\n                                   `  help              - Mostra questa lista di comandi.\\n` +\n                                   `  status            - Mostra lo stato attuale del sistema.\\n` +\n                                   `  date              - Mostra data e ora correnti.\\n` +\n                                   `  news              - Recupera le ultime notizie dal web.\\n` +\n                                   `  weather <città>   - Mostra il meteo attuale per la città specificata.\\n` +\n                                   `  clear             - Pulisce lo schermo del terminale.`;\n                    addMessage(helpText, 'lorel');\n                    break;\n                case 'status':\n                    addMessage('STATUS: ONLINE. Version: 2.5. Modules: Custom Input Handler, Advanced Command Parser, API Fetch (Active).', 'lorel');\n                    break;\n                case 'date':\n                    addMessage(new Date().toLocaleString('it-IT'), 'lorel');\n                    break;\n                case 'clear':\n                    history.innerHTML = '';\n                    addMessage('Interfaccia v2.5. Custom input online. Digita \\'help\\' per una lista di comandi.', 'lorel');\n                    break;\n                case 'news':\n                    fetchNews();\n                    break;\n                case 'weather':\n                    if (args.length === 0) {\n                        addMessage('Uso: weather <città>', 'lorel');\n                    } else {\n                        fetchWeather(args.join(' '));\n                    }\n                    break;\n                default:\n                    addMessage(`Comando non riconosciuto: '${command}'. Digita 'help' per la lista dei comandi.`, 'lorel');\n                    break;\n            }\n        }\n\n        async function fetchWeather(city) {\n            addMessage(`Ricerca coordinate per ${city}...`, 'lorel');\n            try {\n                // Step 1: Geocode city\n                const geoResponse = await fetch(`https://geocoding-api.open-meteo.com/v1/search?name=${encodeURIComponent(city)}&count=1&language=it&format=json`);\n                if (!geoResponse.ok) throw new Error(`Errore Geocoding: ${geoResponse.status}`);\n                const geoData = await geoResponse.json();\n                if (!geoData.results || geoData.results.length === 0) {\n                    throw new Error(`Città non trovata: ${city}`);\n                }\n                const location = geoData.results[0];\n                const { latitude, longitude, name, admin1 } = location;\n                addMessage(`Coordinate trovate per ${name}, ${admin1}. Recupero dati meteo...`, 'lorel');\n\n                // Step 2: Fetch weather\n                const weatherResponse = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${latitude}&longitude=${longitude}&current_weather=true`);\n                if (!weatherResponse.ok) throw new Error(`Errore API Meteo: ${weatherResponse.status}`);\n                const weatherData = await weatherResponse.json();\n                \n                const { temperature, windspeed, weathercode } = weatherData.current_weather;\n                const weatherDescription = getWeatherDescription(weathercode);\n\n                const weatherReport = `Meteo attuale per ${name}, ${admin1}:\\n` +\n                                    `  - Descrizione: ${weatherDescription}\\n` +\n                                    `  - Temperatura: ${temperature}°C\\n` +\n                                    `  - Vento: ${windspeed} km/h`;\n                addMessage(weatherReport, 'lorel');\n\n            } catch (error) {\n                addMessage(`Errore durante il recupero del meteo: ${error.message}`, 'lorel');\n            } finally {\n                scrollToBottom();\n            }\n        }\n\n        function getWeatherDescription(code) {\n            const descriptions = {\n                0: 'Sereno', 1: 'Prevalentemente sereno', 2: 'Parzialmente nuvoloso', 3: 'Nuvoloso',\n                45: 'Nebbia', 48: 'Nebbia con brina',\n                51: 'Pioggerella leggera', 53: 'Pioggerella moderata', 55: 'Pioggerella intensa',\n                61: 'Pioggia leggera', 63: 'Pioggia moderata', 65: 'Pioggia forte',\n                71: 'Nevicata leggera', 73: 'Nevicata moderata', 75: 'Nevicata forte',\n                80: 'Rovescio leggero', 81: 'Rovescio moderato', 82: 'Rovescio violento',\n                95: 'Temporale', 96: 'Temporale con grandine leggera', 99: 'Temporale con grandine pesante'\n            };\n            return descriptions[code] || 'Condizioni non specificate';\n        }\n\n        function fetchNews() {\n            addMessage('Recupero notizie dal web...', 'lorel');\n            fetch('https://jsonplaceholder.typicode.com/posts?_limit=3')\n                .then(response => {\n                    if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);\n                    return response.json();\n                })\n                .then(data => {\n                    let newsHeadlines = 'Ultime notizie recuperate:\\n\\n';\n                    data.forEach((article, index) => {\n                        const title = article.title.charAt(0).toUpperCase() + article.title.slice(1);\n                        newsHeadlines += `[${index + 1}] ${title}\\n`;\n                    });\n                    addMessage(newsHeadlines, 'lorel');\n                })\n                .catch(error => {\n                    addMessage(`Errore durante il recupero delle notizie: ${error.message}`, 'lorel');\n                })\n                .finally(() => scrollToBottom());\n        }\n\n        function addMessage(text, sender) {\n            const div = document.createElement('div');\n            div.className = `msg ${sender}`;\n            div.innerText = text;\n            history.appendChild(div);\n        }\n\n        function scrollToBottom() {\n             terminalContainer.scrollTop = terminalContainer.scrollHeight;\n        }\n\n    </script>\n</body>\n</html>