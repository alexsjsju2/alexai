<!DOCTYPE html>\n<html lang=\"it\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Lorel Axun</title>\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/xterm/css/xterm.css\" />\n    <style>\n        body, html {\n            margin: 0;\n            padding: 0;\n            height: 100%;\n            background-color: #000;\n            color: #0f0;\n            font-family: 'Courier New', Courier, monospace;\n            overflow: hidden;\n        }\n        #terminal-container {\n            width: 100%;\n            height: 100%;\n        }\n    </style>\n</head>\n<body>\n    <div id=\"terminal-container\"></div>\n\n    <script src=\"https://cdn.jsdelivr.net/npm/xterm/lib/xterm.js\"></script>\n    <script src=\"https://cdn.jsdelivr.net/npm/xterm-addon-fit/lib/xterm-addon-fit.js\"></script>\n    <script src=\"https://cdn.jsdelivr.net/npm/figlet/lib/figlet.js\"></script>\n\n    <script>\n        document.addEventListener('DOMContentLoaded', function () {\n            const term = new Terminal({\n                cursorBlink: true,\n                theme: {\n                    background: '#000000',\n                    foreground: '#00FF00',\n                    cursor: '#00FF00'\n                }\n            });\n\n            const fitAddon = new FitAddon.FitAddon();\n            term.loadAddon(fitAddon);\n            term.open(document.getElementById('terminal-container'));\n            fitAddon.fit();\n            window.addEventListener('resize', () => fitAddon.fit());\n\n            const prompt = '\\n> ';\n            let currentInput = '';\n            let cursorPos = 0;\n            let commandHistory = JSON.parse(localStorage.getItem('commandHistory')) || [];\n            let historyIndex = commandHistory.length;\n\n            const commands = {\n                'help': () => {\n                    term.writeln('Comandi disponibili:');\n                    Object.keys(commands).forEach(cmd => {\n                        term.writeln(`  ${cmd}`);\n                    });\n                },\n                'ciao': () => term.writeln('Ciao! Come posso aiutarti?'),\n                'chi sei': () => term.writeln('Sono Lorel Axun, un\\'intelligenza artificiale in evoluzione.'),\n                'cosa sai fare': () => term.writeln('Usa il comando \\'help\\' per vedere la lista delle mie capacitÃ .'),\n                'echo': (args) => term.writeln(args.join(' ')),\n                'clear': () => term.reset()\n            };\n\n            function typewriterEffect(text, callback) {\n                let i = 0;\n                function type() {\n                    if (i < text.length) {\n                        term.write(text.charAt(i));\n                        i++;\n                        setTimeout(type, 50);\n                    } else if (callback) {\n                        callback();\n                    }\n                }\n                type();\n            }\n\n            function processCommand() {\n                const trimmedInput = currentInput.trim();\n                if (trimmedInput === '') {\n                    term.write(prompt);\n                    return;\n                }\n\n                if (commandHistory[commandHistory.length - 1] !== trimmedInput) {\n                    commandHistory.push(trimmedInput);\n                    localStorage.setItem('commandHistory', JSON.stringify(commandHistory));\n                }\n                historyIndex = commandHistory.length;\n\n                const [command, ...args] = trimmedInput.split(/\\s+/);\n                term.writeln('');\n                if (commands[command]) {\n                    commands[command](args);\n                } else {\n                    term.writeln(`Comando non trovato: ${command}`);\n                }\n                currentInput = '';\n                cursorPos = 0;\n                term.write(prompt);\n            }\n            \n            function redrawLine() {\n                const originalCursorPos = cursorPos;\n                term.write('\\r' + prompt + '\\x1b[K' + currentInput);\n                cursorPos = originalCursorPos;\n                term.write(`\\r\\x1b[${prompt.length + cursorPos}C`);\n            }\n\n            figlet.parseFont('Standard', figlet.defaults.font);\n            figlet.text('Lorel Axun', {\n                font: 'Standard',\n            }, function(err, data) {\n                if (err) {\n                    console.log('Something went wrong...');\n                    console.dir(err);\n                    return;\n                }\n                term.writeln(data);\n                typewriterEffect('Benvenuto. Digita \\'help\\' per iniziare.', () => term.write(prompt));\n            });\n\n            term.onKey(({ key, domEvent }) => {\n                const ev = domEvent;\n                const printable = !ev.altKey && !ev.ctrlKey && !ev.metaKey;\n\n                switch (ev.key) {\n                    case 'Enter':\n                        processCommand();\n                        break;\n                    case 'Backspace':\n                        if (cursorPos > 0) {\n                            currentInput = currentInput.slice(0, cursorPos - 1) + currentInput.slice(cursorPos);\n                            cursorPos--;\n                            redrawLine();\n                        }\n                        break;\n                    case 'ArrowUp':\n                        if (historyIndex > 0) {\n                            historyIndex--;\n                            currentInput = commandHistory[historyIndex];\n                            cursorPos = currentInput.length;\n                            redrawLine();\n                        }\n                        break;\n                    case 'ArrowDown':\n                        if (historyIndex < commandHistory.length - 1) {\n                            historyIndex++;\n                            currentInput = commandHistory[historyIndex];\n                            cursorPos = currentInput.length;\n                            redrawLine();\n                        } else {\n                            historyIndex = commandHistory.length;\n                            currentInput = '';\n                            cursorPos = 0;\n                            redrawLine();\n                        }\n                        break;\n                    case 'ArrowLeft':\n                        if (cursorPos > 0) {\n                            cursorPos--;\n                            term.write('\\x1b[D'); // Move cursor left\n                        }\n                        break;\n                    case 'ArrowRight':\n                        if (cursorPos < currentInput.length) {\n                            cursorPos++;\n                            term.write('\\x1b[C'); // Move cursor right\n                        }\n                        break;\n                    default:\n                        if (printable && ev.key.length === 1) {\n                            const firstPart = currentInput.slice(0, cursorPos);\n                            const secondPart = currentInput.slice(cursorPos);\n                            currentInput = firstPart + key + secondPart;\n                            cursorPos++;\n                            redrawLine();\n                        }\n                }\n            });\n        });\n    </script>\n</body>\n</html>